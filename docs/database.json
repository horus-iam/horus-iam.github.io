{"filename":"/home/rleoni/Github/horus-iam.github.io/database.json","collections":[{"name":"documents","data":[{"path":"/horus-api","id":0,"name":"horus-api","text":"## Horus Api\n\nA collection of rest endpoints to implement the most common oauth2 flows\n\n## Response codes\n\n- If response is success, http **status** will be **200** and **code** in body will be **200XYZ**\n- If the invocation ends with error, http status will have the standard status: 401, 403, 500, 502, etc and the code in body will contain an extra numeric values to classify the error:\n  - 400xyz\n  - 401xyz\n  - 403xyz\n  - 500xyz\n  - etcxyz","type":"node","meta":{"revision":0,"created":1697957890107,"version":0},"$loki":1},{"path":"/horus-api/grant: client-credential","id":1,"parent":0,"name":"grant: client-credential","type":"node","meta":{"revision":0,"created":1697957890107,"version":0},"$loki":2},{"path":"/horus-api/grant: client-credential/client credential - no spec.md","id":2,"parent":1,"type":"child","text":"\n\n---\n\n# Client Credential - non spec\n\nThe Client Credentials grant type is used by clients to obtain an access token outside of the context of a user.\n\nThis is typically used by clients to access resources about themselves rather than to access a user's resources.\n\nNote: This endpoint don't comply the oauth2 specification\n\n**Base Url** : `{{horusApiBaseUrl}}`\n\n**Endpoint** : `/v1/nonspec/oauth2/auth/server`\n\n**Method** : `POST`\n\n**Auth required** : No\n\n\n## Request\n\n**type: body**\n\n```json\n{\n\"grantType\":\"client_credentials\",\n\"clientId\":\"6f7503fc-2cc1-4cf1-b45c-e50f324bf8ca.library.apps\",\n\"clientSecret\":\"b3209806-42da-402d-92dc-ab2f3ef8608b\"\n}\n```\n\n**Request Fields Description**\n\n| key | data-type | required | description |\n|------------|--------------|-------------|-------------|\n| clientId  |  string | yes | clientId which allow the execution of this endpoint |\n| clientSecret  |  string | yes | clientSecret related to clientId |\n| grantType  |  string | yes | use **client_credentials** |\n\n**Request Headers Description**\n\n| header key | header value | description |\n|------------|--------------|-------------|\n| content-type  |  application/json | relatd to the json body |\n\n\n## Response\n\n```json\n{\n    \"code\": 200000,\n    \"message\": \"success\",\n    \"content\": {\n        \"expiresIn\": \"3600s\",\n        \"accessToken\": \"eyJhbGciOiJIU***\",\n        \"tokenType\": \"bearer\"\n    }\n}\n```\n\n**Response Fields Description**\n\n\n| field | data-type | description |\n|------------|--------------|-------------|\n| code  | int | numeric value which indicates the success or failure of invocation. 200XYZ for success and any other value for failures  |\n| message  | string | message related to code. On errors contains a description  |\n| content.accessToken  | string | token to be attached to any api invocation  |\n| content.expiresIn  | string | token expiration in seconds  |\n\n**Response Headers Description**\n\n| header key | header value | description |\n|------------|--------------|-------------|\n| x-horus-request-id  |  ***** | value received in request headers or a  random alphanumeric value if client don't send it|\n\n**Response codes**\n\n| code | description |\n|------------|-------------|\n| 400  | field is required.  |\n| 401122  | clientId or clientScret are invalid.  |\n","name":"client credential - no spec.md","order":2,"title":"Client Credential - non spec","meta":{"revision":0,"created":1697957890107,"version":0},"$loki":3},{"path":"/horus-api/grant: client-credential/client credential - spec.md","id":3,"parent":1,"type":"child","text":"\n\n---\n\n# Client Credential - spec\n\nThe Client Credentials grant type is used by clients to obtain an access token outside of the context of a user.\n\nThis is typically used by clients to access resources about themselves rather than to access a user's resources.\n\n**Base Url** : `{{horusApiBaseUrl}}`\n\n**Endpoint** : `/v1/oauth/token`\n\n**Method** : `POST`\n\n**Auth required** : No\n\n\n## Request\n\n**type: body**\n\n```json\nclient_id=*********&client_secret=*******&grant_type=client_credentials\n```\n\n**Request Fields Description**\n\n| key | data-type | required | description |\n|------------|--------------|-------------|-------------|\n| client_id  |  string | yes | clientId which allow the execution of this endpoint |\n| client_secret  |  string | yes | clientSecret related to clientId |\n| grant_type  |  string | yes | use **client_credentials** |\n\n**Request Headers Description**\n\n| header key | header value | description |\n|------------|--------------|-------------|\n| content-type  |  application/x-www-form-urlencoded | required by the spec |\n\n\n## Response\n\n```json\n{\n  \"expires_in\": \"3600s\",\n  \"access_token\": \"eyJhbGciOiJIU***\",\n  \"token_type\": \"bearer\"\n}\n```\n\n**Response Fields Description**\n\n\n| field | data-type | description |\n|------------|--------------|-------------|\n| token_type  | string | bearer  |\n| access_token  | string | token to be attached to any api invocation  |\n| expires_in  | string | token expiration in seconds  |\n\n**Response Headers Description**\n\n| header key | header value | description |\n|------------|--------------|-------------|\n| x-horus-request-id  |  ***** | value received in request headers or a  random alphanumeric value if client don't send it|\n\n**Response codes**\n\n| code | description |\n|------------|-------------|\n| 400  | field is required.  |\n| 401122  | clientId or clientScret are invalid.  |\n","name":"client credential - spec.md","order":1,"title":"Client Credential - spec","meta":{"revision":0,"created":1697957890107,"version":0},"$loki":4},{"path":"/horus-api/token validation","id":4,"parent":0,"name":"token validation","type":"node","meta":{"revision":0,"created":1697957890107,"version":0},"$loki":5},{"path":"/horus-api/token validation/token validation v1.md","id":5,"parent":4,"type":"child","text":"\n\n---\n\n# Token validation - v1\n\nValidate the relationship between token, subject(person or client), option (endpoint or menu web), http method and application using an http approach\n\n**Base Url** : `{{horusApiBaseUrl}}`\n\n**Endpoint** : `/v1/nonspec/oauth2/introspect/validate`\n\n**Method** : `POST`\n\n**Auth required** : No\n\n**Permissions required** : No\n\n## Request\n\n**type: body**\n\n**validate web**\n\n```json\n{\n   \"token\":\"eyJhbGciOiJIUzI1NbpBI0cPA3ZmH1tDwaqBo9Q\",\n   \"optionValue\":\"/home\",\n   \"httpMethod\":\"NOT_HTTP_METHOD\",\n   \"appName\":\"pasarela-web\"\n}\n```\n\n**validate api**\n\n```json\n{\n   \"token\":\"eyJhbGciOiJIUzDorpsd40YSHORpQA9yZLA\",\n   \"optionValue\":\"/payment\",\n   \"httpMethod\":\"POST\",\n   \"appName\":\"pasarela-api\"\n}\n```\n\n**Request Fields Description**\n\n| key | data-type | required | description |\n|------------|--------------|-------------|-------------|\n| token  |  string | yes | valid access_token previously generated by horus |\n| optionValue  |  string | yes | rest endpoint or menu web registered in horus |\n| httpMethod  |  string | yes | http method related to the rest endpoint. Use **NOT_HTTP_METHOD** for web apps|\n| appName  |  string | yes | aplication identifier previously registered in horus|\n\n**Request Headers Description**\n\n| header key | header value | description |\n|------------|--------------|-------------|\n| x-horus-request-id  |  4512451 | random alphanumeric value which identify this event |\n\n\n## Response\n\n```json\n{\n    \"code\": 200000,\n    \"message\": \"success\",\n    \"content\": {\n        \"isAllowed\": true,\n        \"subject\": \"sanvi@828fligth.com\"\n    }\n}\n```\n\n**Response Fields Description**\n\n\n| field | data-type | description |\n|------------|--------------|-------------|\n| code  | int | numeric value which indicates the success or failure of invocation. 200XYZ for success and any other value for failures  |\n| message  | string | message related to code. On errors contains a description  |\n| content.isAllowed  | boolean | flag that indicated if user related to the entered token has access to the aplication, endpoint and method  |\n| content.subject  | string | person email or clientId related to the entered token  |\n\n**Response Headers Description**\n\n| header key | header value | description |\n|------------|--------------|-------------|\n| x-horus-request-id  |  ***** | value received in request headers or a  random alphanumeric value if client don't send it|\n\n**Response codes**\n\n| code | description |\n|------------|-------------|\n| 403100  | token expired |\n| 403101  | token malformed  |\n","name":"token validation v1.md","order":2,"title":"Token validation - v1","meta":{"revision":0,"created":1697957890107,"version":0},"$loki":6},{"path":"/horus-api/token validation/token validation v2.md","id":6,"parent":4,"type":"child","text":"\n\n---\n\n# Token validation - v2\n\nValidate the relationship between token, subject(person or client) and permission\n\n**Base Url** : `{{horusApiBaseUrl}}`\n\n**Endpoint** : `/v2/oauth2/token/validate`\n\n**Method** : `POST`\n\n**Auth required** : No\n\n**Permissions required** : No\n\n## Request\n\n**type: body**\n\n```json\n{\n    \"token\":\"eyJhbGciO****SfqIjpC5NQlLo\",\n    \"permission\":\"book:create\",\n    \"appIdentifier\":\"library-api\"\n}\n```\n\n**Request Fields Description**\n\n| key | data-type | required | description |\n|------------|--------------|-------------|-------------|\n| token  |  string | yes | valid access_token previously generated by horus |\n| optionValue  |  string | yes | rest endpoint or menu web registered in horus |\n| httpMethod  |  string | yes | http method related to the rest endpoint. Use **NOT_HTTP_METHOD** for web apps|\n| appName  |  string | yes | aplication identifier previously registered in horus|\n\n**Request Headers Description**\n\n| header key | header value | description |\n|------------|--------------|-------------|\n| x-horus-request-id  |  4512451 | random alphanumeric value which identify this event |\n\n\n## Response\n\n```json\n{\n    \"code\": 200000,\n    \"message\": \"success\",\n    \"content\": {\n        \"isAllowed\": true,\n        \"subject\": \"sanvi@828fligth.com\"\n    }\n}\n```\n\n**Response Fields Description**\n\n\n| field | data-type | description |\n|------------|--------------|-------------|\n| code  | int | numeric value which indicates the success or failure of invocation. 200XYZ for success and any other value for failures  |\n| message  | string | message related to code. On errors contains a description  |\n| content.isAllowed  | boolean | flag that indicated if user related to the entered token has access to the aplication, endpoint and method  |\n| content.subject  | string | person email or clientId related to the entered token  |\n\n**Response Headers Description**\n\n| header key | header value | description |\n|------------|--------------|-------------|\n| x-horus-request-id  |  ***** | value received in request headers or a  random alphanumeric value if client don't send it|\n\n**Response codes**\n\n| code | description |\n|------------|-------------|\n| 403100  | token expired |\n| 403101  | token malformed  |\n","name":"token validation v2.md","order":2,"title":"Token validation - v2","meta":{"revision":0,"created":1697957890107,"version":0},"$loki":7},{"path":"/root.md","id":7,"type":"child","text":"# Horus IAM Platform\n\nA simple and lightweight oauth2 engine with web console for management and ready to use oauth2 endpoints \n","name":"root.md","meta":{"revision":0,"created":1697957890107,"version":0},"$loki":8}],"idIndex":null,"binaryIndices":{},"constraints":null,"uniqueNames":[],"transforms":{},"objType":"documents","dirty":false,"cachedIndex":null,"cachedBinaryIndex":null,"cachedData":null,"adaptiveBinaryIndices":true,"transactional":false,"cloneObjects":false,"cloneMethod":"parse-stringify","asyncListeners":false,"disableMeta":false,"disableChangesApi":true,"disableDeltaChangesApi":true,"autoupdate":false,"serializableIndices":true,"disableFreeze":true,"ttl":null,"maxId":8,"DynamicViews":[],"events":{"insert":[],"update":[],"pre-insert":[],"pre-update":[],"close":[],"flushbuffer":[],"error":[],"delete":[null],"warning":[null]},"changes":[],"dirtyIds":[]}],"databaseVersion":1.5,"engineVersion":1.5,"autosave":false,"autosaveInterval":5000,"autosaveHandle":null,"throttledSaves":true,"options":{"autoload":true,"serializationMethod":"normal","destructureDelimiter":"$<\n","recursiveWait":true,"recursiveWaitLimit":false,"recursiveWaitLimitDuration":2000,"started":1697957890108},"persistenceMethod":"fs","persistenceAdapter":null,"verbose":false,"events":{"init":[null],"loaded":[],"flushChanges":[],"close":[],"changes":[],"warning":[]},"ENV":"NODEJS"}